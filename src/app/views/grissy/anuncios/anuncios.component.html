<app-table-grissy #tablegrissy baseURL="/anuncios.php" [colsTable]="colsTable" (modal)="modal($event)">
</app-table-grissy>

<p-dialog [(visible)]="abrirModal" [style]="{width: '50vw'}" [breakpoints]="{'700px': '90%'}" [maximizable]="true"
  [draggable]="false" [resizable]="false" [modal]="true">
  <ng-template pTemplate="header">
    <h4>Registro</h4>
  </ng-template>
  <div>
    <form [formGroup]="form">
      <div class="mx-2 my-2">
        <div class="form-group ">
          <label for="codigo">Codigo</label>
          <div class="input-group ">
            <input title="codigo" type="text" class="form-control" formControlName="codigo">
            <p-message *ngIf="this.form.get('codigo')?.errors?.['required']" severity="error"></p-message>
            <p-message *ngIf="!this.form.get('codigo')?.errors?.['required']" severity="success"></p-message>
          </div>
        </div>
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <div class="input-group ">
            <input title="nombre" type="text" class="form-control" formControlName="nombre">
            <p-message *ngIf="this.form.get('nombre')?.errors?.['required']" severity="error"></p-message>
            <p-message *ngIf="!this.form.get('nombre')?.errors?.['required']" severity="success"></p-message>
          </div>
        </div>
        <div class="form-group">
          <label for="fecha_inicio">Fecha Inicio</label>
          <div class="input-group ">
            <input title="fecha_inicio" type="date" class="form-control" formControlName="fecha_inicio"
              [ngClass]="{ 'is-invalid': submitted && f['fecha_inicio'].errors}">
            <p-message *ngIf="this.form.get('fecha_inicio')?.errors?.['required']" severity="error"></p-message>
            <p-message *ngIf="!this.form.get('fecha_inicio')?.errors?.['required']" severity="success"></p-message>
          </div>
        </div>

        <div class="form-group">
          <label for="fecha_final">Fecha Final</label>
          <div class="input-group ">
            <input title="fecha_final" type="date" class="form-control" formControlName="fecha_final"
              [ngClass]="{ 'is-invalid': submitted && f['fecha_final'].errors}">
            <p-message *ngIf="this.form.get('fecha_final')?.errors?.['required']" severity="error"></p-message>
            <p-message *ngIf="!this.form.get('fecha_final')?.errors?.['required']" severity="success"></p-message>
          </div>
        </div>

        <div class="form-group">
          <label for="text">Descripcion</label>
          <div class="input-group ">
          <textarea id="text" title="descripcion" class="form-control" id="exampleFormControlTextarea1" rows="3"
            formControlName="descripcion"></textarea>
          <p-message *ngIf="this.form.get('descripcion')?.errors?.['required']" severity="error"></p-message>
          <p-message *ngIf="!this.form.get('descripcion')?.errors?.['required']" severity="success"></p-message>
          </div>
        </div>

        <div class="form-group">
          <label for="url_imagen">Foto</label>

          <span id="condicion">{{limite}}</span>
          <div class="file-drop-area">
            <span class="fake-btn">Seleccionar Imagen</span>
            <span class="file-msg">{{nombreImagen}}</span>
            <input title="Foto" class="form-control" class="file-input" (change)="cargarArchivo($event)" type="file"
              accept="image/*" />
          </div>
          <div>
            <p-image src="{{form.value.url_imagen}}" alt="Image" width="150" [preview]="true" class="card shadow-4 img">
            </p-image>
          </div>
        </div>



      </div>
    </form>
  </div>
  <ng-template pTemplate="footer">
    <div class="container">
      <p-button label="Guardar" (onClick)="guardadito(tablegrissy);"></p-button>
      <p-button label="Cancelar" (onClick)=" abrirModal = false;"></p-button>
    </div>
  </ng-template>
</p-dialog>
